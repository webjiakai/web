<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<head>
	<meta charset="UTF-8">
	<title>恩牛网-我的展厅</title>

	<link rel="stylesheet" href="css/giveCode.css">
	<link rel="stylesheet" href="../../plugin/page/css/table.css">
	<link rel="stylesheet" href="../../plugin/select/chosen.min.css">
	<link rel="stylesheet" href="../../plugin/popup/css/manhuaDialog.1.0.css">

	<script type="text/javascript" src="../../base/js/jquery.js"></script>
	<script type="text/javascript" src="../../plugin/select/chosen.jquery.js"></script>
	<script type="text/javascript" src="../../plugin/page/script/jquery.page.js"></script>
	<script type="text/javascript" src="../../plugin/popup/script/manhuaDialog.2.0.js"></script>
	<script type="text/javascript" src="../../base/js/public.js"></script>
	<script type="text/javascript" src="http://www.ennew.dev2/static/static/reqConfig.js"></script>
	<script src="../../base/js/docassistant.js" type="text/javascript"></script>
	<script>
		function initBefore() {
			/**************题目1***************/
			/*要求:
			1.第一列为自动排序列，按照1234自动写入序号
			2.把表格数据初始化好
			3.商品属性为多个，需要自己组合成属性字符串赋值到单元格中
			4.商品状态对应码1：发布中，2：审核中，3:已删除，当商品为已删除状态时，整个行背景为灰色，并且行里的删除按钮不能点击
			5.给删除按钮增加删除方法，点击按钮删除对应行。
			6.保证全选功能可用
			*/
			var jsonData = {
				"results": {
					"pages": 1,
					"pageNum": 1,
					"resultData": [{
						"goodsId": "1001",
						"goodsName": "iphone7",
						"goodsProp": [{
							"name": "内存",
							"value": "128G"
						}, {
							"name": "颜色",
							"value": "红色"
						}],
						"status": "1",
						"prdDate": "2016-03-29 17:00:56"
					}, {
						"goodsId": "1002",
						"goodsName": "iphone6",
						"goodsProp": [{
							"name": "内存",
							"value": "128G"
						}, {
							"name": "颜色",
							"value": "红色"
						}],
						"status": "1",
						"prdDate": "2016-03-29 17:00:56"
					}, {
						"goodsId": "1003",
						"goodsName": "iphone6s",
						"goodsProp": [{
							"name": "内存",
							"value": "128G"
						}, {
							"name": "颜色",
							"value": "红色"
						}],
						"status": "2",
						"prdDate": "2016-03-29 17:00:56"
					}, {
						"goodsId": "1004",
						"goodsName": "三星",
						"goodsProp": [{
							"name": "内存",
							"value": "128G"
						}, {
							"name": "颜色",
							"value": "红色"
						}],
						"status": "3",
						"prdDate": "2016-03-29 17:00:56"
					}]
				}
			};
			document.getElementById("resultList").data = jsonData;
			$(document).ready(function() {
				console.log(jsonData)
				$("#gcBtn").click(function() {
					document.getElementById("resultList").jsCtrl.jsonData = {
						"results": {
							"pages": 1,
							"pageNum": 1,
							"resultData": [{
								"goodsId": "1001",
								"goodsName": "iphone7",
								"goodsProp": [{
									"name": "内存",
									"value": "128G"
								}, {
									"name": "颜色",
									"value": "红色"
								}],
								"status": "1",
								"prdDate": "2016-03-29 17:00:56"
							}, {
								"goodsId": "1002",
								"goodsName": "iphone6",
								"goodsProp": [{
									"name": "内存",
									"value": "128G"
								}, {
									"name": "颜色",
									"value": "红色"
								}],
								"status": "1",
								"prdDate": "2016-03-29 17:00:56"
							}, {
								"goodsId": "1003",
								"goodsName": "iphone6s",
								"goodsProp": [{
									"name": "内存",
									"value": "128G"
								}, {
									"name": "颜色",
									"value": "红色"
								}],
								"status": "1",
								"prdDate": "2016-03-29 17:00:56"
							}, {
								"goodsId": "1004",
								"goodsName": "三星",
								"goodsProp": [{
									"name": "内存",
									"value": "128G"
								}, {
									"name": "颜色",
									"value": "红色"
								}],
								"status": "1",
								"prdDate": "2016-03-29 17:00:56"
							}]
						}
					};

					document.getElementById("resultList").jsCtrl.refresh();
				});

			});

			/*****************题目1结束********************/
			document.getElementById("countryName").data = {
				"results": [{
					"dataCode": 1001,
					"dataValue": "中华人民共和国"
				}, {
					"dataCode": 1002,
					"dataValue": "非洲"
				}, {
					"dataCode": 1003,
					"dataValue": "美洲"
				}]
			};

		}
		//第一题
		function clsStandardTableCtrl$progress(jsonItem, cloneRow) {
			var str = "商品属性";
			var items = jsonItem.goodsProp;
			//循环遍历数组
			for(var i = 0; i < items.length; i++) {
				str += `
		   				<span> ${items[i].name} </span> <span> ${items[i].value} </span>
			   		`
			}
			//添加数据到td中
			$(cloneRow).find("#goodsPropDef").append(str);
			//状态判断
			switch(jsonItem.status) {
				case "1":
					$(cloneRow).find("#statusDef").text("发布中");
					break;
				case "2":
					$(cloneRow).find("#statusDef").text("审核中");
					break;
				case "3":
					$(cloneRow).find("#statusDef").text("已删除");
					break;
			}
			//删除功能
			$(cloneRow).find(".comClick").click(function() {
				$(this).parents("tr:first").remove()
			})

		}

		/**************题目2***************/
		/*要求:
			1.初始化id为btnSearch的查询按钮
			2.把查询条件打印出来
			3.把以后的查询条件json串增加一个属性isActive:1
			4.然后在打印出来
		*/
		function clsSearchBtnCtrl$after(jsonCond) {
			var filter = JSON.stringify(jsonCond);
			$("tbody")
			//增加一个属性isActive=1并且打印出来
			alert(JSON.stringify(jsonCond));
		}

		$(document).ready(function() {
			/**************题目3***************/
			/*要求:
				1.要求第一行永远没有减号
				2.点击加号时候增加一个新行
				3.如果行数超过2个，最后一行永远有加号和减号，其他行除了第一行都有减号
				4.点击减号删除整行
			*/

			$(".plusTip").click(function() {
				$(this).parents("#templateDiv").clone(true).appendTo("#account");

			});
			$(".minusTip").click(function() {
				$(this).parents("#templateDiv").remove()
			});

		});
		//弹出框
		$("button").click(function(){
			function clsMessageBoxCtrl$openWin() {
    		openWin(400, 220, "messageBoxWin", true);
	}
		})
		

	</script>
</head>

<body>
	<div class="giveCodeGl">
		<!--查询筛选-->
		<div class="gcChoose">
			<p class="fl"><b>商品名称:&nbsp;</b><input type="text" id="goodsName">
				<a href="javascript:;" id="divPlusMinusContent" class="gcBtn" comtype="searchBtnCtrl" rule="cond" cond="goodsName" uniontableid="resultList">查询按钮例子</a>
			</p>
		</div>
		<table cellspacing="0" cellpadding="0" class="gcList" id="resultList" idx="rowNum" comType="standardTableCtrl" page="tcdPageCode" templateId="templateRow" reqPath="" reqParam="{}" method="POST" noData="nonData">
			<tr>
				<th><input type="checkbox" id="allChk" comType="checkAll" cond="" unionTableId="resultList" chkId="chkCoding">全选</th>
				<th>商品名称</th>
				<th>商品属性</th>
				<th>商品状态</th>
				<th>生产日期</th>
				<th>操作</th>
			</tr>
			<tr style="display: none" id="templateRow">
				<td>
					<input type="checkbox" id="chkCoding"><span id="rowNum">自动排序值</span>
				</td>
				<td id="goodsName">
					商品名称
				</td>
				<td id="goodsPropDef" class="col">

				</td>
				<td id="statusDef" class="aa">

				</td>
				<td id="prdDate">

				</td>
				<td>
					<a href="javascript:;" class="comClick">删除</a>
				</td>
			</tr>
		</table>
		<!--暂无数据时显示-->
		<p id="nonData" style="display:none;width:100%;padding:20px 0;text-align:center;font:12px/18px 'Microsoft YaHei';height:18px;color:red;background:white">暂无数据.....</p>
		<div class="tcdPageCode"></div>
	</div>
	<!--加减行-->
	<div id="account">

		<div class="cloneContainer" id="templateDiv">
			<input type="text">
			<span class="plusTip" style="display: inline-block;"></span>
			<span class="minusTip" style="display: inline-block;"></span>
		</div>

	</div>
	<!--下拉-->
	<select id="countryName" class="comSelect" comType="singleSelectCtrl" selPath="../../selAction" emptyValue="不限" initValue="" selCode="dataCode" selValue="dataValue" name="" reqPath="" reqParam="{}" style="width: 200px;">
		<option value="">不限</option>
	</select>
<!--弹出框-->
	<div id="messageBoxWin">
		你好大坏蛋adhad
	</div>
	<button>弹出框</button>
	<!--三级联动-->
	<select id="province" class="selectCascade" style="margin-left: 0px;width: 120px;" comType="unionSelectCtrl" isEmptyShow="0" reqPath="/vasCommon/findAreas" selPath="/vasCommon/findAreas" method="post" paramName="parentId" reqParam="{}" selCode="selCode" selValue="selValue" unionSel="city,county" emptyValue="请选择" initValues="">
			<option value="">机sad</option>
			<option value="">机sad</option>
			<option value="">机sad</option>
					</select>
					<select id="city" class="selectCascade" isEmptyShow="0" style="margin-left: 12px;width: 120px;" reqPath="/vasCommon/findAreas" method="post" paramName="parentId" reqParam="{}" selCode="selCode" selValue="selValue"  unionSel="county" emptyValue="请选择" initValues="">
						<option value="">机sad</option>
						<option value="">机sad</option>
						<option value="">机sad</option>
					</select>
					<select id="county" class="selectCascad" isEmptyShow="0" style="margin-left: 12px;width: 120px;" reqPath="/vasCommon/findAreas" method="post" paramName="parentId" reqParam="{}" selCode="selCode" selValue="selValue" emptyValue="请选择" initValues="">
						<option value="">机sad</option>
						<option value="">机sad</option>
						<option value="">机sad</option>
					</select>

</body>

</html>